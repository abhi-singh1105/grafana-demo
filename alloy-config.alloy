prometheus.scrape "demo" {
  targets = [{ __address__ = "app:5000" }]
  forward_to = [prometheus.remote_write.demo.receiver]
}

prometheus.remote_write "demo" {
  endpoint {
    url = "https://prometheus-prod-24-prod-eu-west-2.grafana.net/api/prom/push"
    basic_auth {
      username= "2589479"
      password= "glc_eyJvIjoiMTQ5NTkzNSIsIm4iOiJzdGFjay0xMzMyNjIxLWludGVncmF0aW9uLWdyYWZhbmF0ZXN0LWdyYWZhbmF0ZXN0IiwiayI6IlFoeTRvRzU1Q1M1aTdkMjdtMjBZQk41ZCIsIm0iOnsiciI6InByb2QtZXUtd2VzdC0yIn19"
    }
  }
}

loki.source.docker "demo" {
  host = "unix:///var/run/docker.sock"
  targets = [{
    __path__ = "/var/lib/docker/containers/*/*.log",
  }]
  forward_to = [loki.write.demo.receiver]
}

loki.write "demo" {
  endpoint {
    url = "https://logs-prod-012.grafana.net/loki/api/v1/push"
    basic_auth {
      username= "1290416"
      password= "glc_eyJvIjoiMTQ5NTkzNSIsIm4iOiJzdGFjay0xMzMyNjIxLWludGVncmF0aW9uLWdyYWZhbmF0ZXN0LWdyYWZhbmF0ZXN0IiwiayI6IlFoeTRvRzU1Q1M1aTdkMjdtMjBZQk41ZCIsIm0iOnsiciI6InByb2QtZXUtd2VzdC0yIn19"
    }
  }
}